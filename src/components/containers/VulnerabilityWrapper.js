import React from 'react';
import { Redirect } from 'react-router-dom';
import Vulnerability from '../../pages/Vulnerability';

import vulnsJSON from '../../json/vulnerabilities';

const VulnerabilityWrapper = ({match}) => {
  // Pass the audit's info
  let vuln = {};
  const id = parseInt(match.params.id, 10);
  for(let i = 0; i < vulnsJSON.length; i++) {
    if(vulnsJSON[i].id === id) {
      vuln = vulnsJSON[i];
    }
  }
  // If Audit doesn't exist, redirect to 404 error page
  if(Object.keys(vuln).length === 0) {
    //return (<Audits match={match} {...audit} />);
    return (<Redirect to={{ pathname: '/404', state: { from: match.url } }}/>);
  }
  return (<Vulnerability match={match} vuln={vuln} />);
}

export default VulnerabilityWrapper;